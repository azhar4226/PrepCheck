# PrepCheck System Diagrams

## Data Flow Diagrams

### Level 0: Context Diagram

```
                    ┌─────────────────────┐
                    │                     │
                    │   UGC NET STUDENTS  │
                    │                     │
                    └─────────────────────┘
                              │
                              │ Practice Tests
                              │ Mock Tests
                              │ Results
                              ▼
    ┌─────────────────────┐         ┌─────────────────────┐
    │                     │         │                     │
    │   SYSTEM ADMINS     │◀──────▶ │    PREPCHECK        │
    │                     │         │     SYSTEM          │
    └─────────────────────┘         │                     │
              │                     └─────────────────────┘
              │ User Management                   │
              │ Content Management                │
              │ Analytics                         │
              │                                   │
              │                                   ▼
              │                     ┌─────────────────────┐
              │                     │                     │
              │                     │   GOOGLE GEMINI AI  │
              │                     │                     │
              │                     └─────────────────────┘
              │                               │
              │                               │ Question Generation
              │                               │ Verification
              │                               │
              │                               ▼
              │                     ┌─────────────────────┐
              │                     │                     │
              │                     │   EMAIL SYSTEM      │
              │                     │                     │
              │                     └─────────────────────┘
              │                               │
              │                               │ Notifications
              │                               │ Reports
              │                               │
              └───────────────────────────────┘
```

### Level 1: System Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                 PREPCHECK SYSTEM                                            │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐  │
│  │                 │    │                 │    │                 │    │                 │  │
│  │  AUTHENTICATION │    │  USER           │    │  CONTENT        │    │  ANALYTICS      │  │
│  │     SYSTEM      │    │  MANAGEMENT     │    │  MANAGEMENT     │    │    SYSTEM       │  │
│  │                 │    │                 │    │                 │    │                 │  │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘  │
│           │                       │                       │                       │         │
│           │                       │                       │                       │         │
│           ▼                       ▼                       ▼                       ▼         │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐  │
│  │                 │    │                 │    │                 │    │                 │  │
│  │  TEST           │    │  QUESTION       │    │  AI QUESTION    │    │  NOTIFICATION   │  │
│  │  MANAGEMENT     │    │  BANK           │    │  GENERATION     │    │    SYSTEM       │  │
│  │                 │    │                 │    │                 │    │                 │  │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

### Level 2: Detailed Data Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                            AUTHENTICATION SYSTEM                                           │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  User → [Login] → [Validate Credentials] → [Generate JWT] → [Store Session] → Dashboard    │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                              TEST MANAGEMENT SYSTEM                                        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  Student → [Select Subject] → [Choose Chapters] → [Configure Test] → [Generate Questions]  │
│                                                                                             │
│  [Start Test] → [Answer Questions] → [Auto-save Progress] → [Submit Test] → [Calculate]    │
│                                                                                             │
│  [Generate Analytics] → [Store Results] → [Display Performance] → [Recommendations]       │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                          AI QUESTION GENERATION SYSTEM                                     │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  Admin → [Request Questions] → [Create Celery Task] → [Generate Prompt] → [Call Gemini]    │
│                                                                                             │
│  [Parse Response] → [Validate Format] → [Store Questions] → [Verify Quality] → [Update]   │
│                                                                                             │
│  [Notification] → [Admin Review] → [Approve/Reject] → [Activate Questions]                 │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                             ANALYTICS SYSTEM                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  [Test Results] → [Calculate Metrics] → [Chapter-wise Analysis] → [Performance Trends]     │
│                                                                                             │
│  [Generate Insights] → [Identify Strengths/Weaknesses] → [Create Recommendations]         │
│                                                                                             │
│  [Store Analytics] → [Dashboard Charts] → [Reports] → [Email Summaries]                   │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Class Diagrams

### Core Domain Classes

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                   USER DOMAIN                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────┐                                                                       │
│  │      User       │                                                                       │
│  ├─────────────────┤                                                                       │
│  │ - id: int       │                                                                       │
│  │ - email: str    │                                                                       │
│  │ - full_name: str│                                                                       │
│  │ - is_admin: bool│                                                                       │
│  │ - created_at    │                                                                       │
│  ├─────────────────┤                                                                       │
│  │ + set_password()│                                                                       │
│  │ + check_password()│                                                                     │
│  │ + to_dict()     │                                                                       │
│  └─────────────────┘                                                                       │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                 CONTENT DOMAIN                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐                       │
│  │    Subject      │    │    Chapter      │    │  QuestionBank   │                       │
│  ├─────────────────┤    ├─────────────────┤    ├─────────────────┤                       │
│  │ - id: int       │    │ - id: int       │    │ - id: int       │                       │
│  │ - name: str     │    │ - name: str     │    │ - question_text │                       │
│  │ - subject_code  │    │ - subject_id    │    │ - option_a      │                       │
│  │ - paper_type    │    │ - weightage_p1  │    │ - option_b      │                       │
│  │ - total_marks   │    │ - weightage_p2  │    │ - option_c      │                       │
│  ├─────────────────┤    ├─────────────────┤    │ - option_d      │                       │
│  │ + to_dict()     │    │ + to_dict()     │    │ - correct_option│                       │
│  └─────────────────┘    └─────────────────┘    │ - explanation   │                       │
│           │                       │            │ - difficulty    │                       │
│           │                       │            │ - paper_type    │                       │
│           │                       │            │ - is_verified   │                       │
│           └───────────────────────┼────────────┤ - chapter_id    │                       │
│                                   │            ├─────────────────┤                       │
│                                   │            │ + to_dict()     │                       │
│                                   │            │ + increment_usage()│                     │
│                                   │            │ + update_performance()│                   │
│                                   │            └─────────────────┘                       │
│                                   │                                                       │
│                                   └─────────────────────────────────────────────────────  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                  TEST DOMAIN                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────┐                    ┌─────────────────┐                               │
│  │ UGCNetMockTest  │                    │UGCNetMockAttempt│                               │
│  ├─────────────────┤                    ├─────────────────┤                               │
│  │ - id: int       │                    │ - id: int       │                               │
│  │ - title: str    │                    │ - user_id: int  │                               │
│  │ - subject_id    │                    │ - mock_test_id  │                               │
│  │ - paper_type    │                    │ - status: str   │                               │
│  │ - total_questions│                   │ - score: float  │                               │
│  │ - time_limit    │                    │ - percentage    │                               │
│  │ - weightage_config│                  │ - start_time    │                               │
│  ├─────────────────┤                    │ - end_time      │                               │
│  │ + to_dict()     │                    │ - answers_data  │                               │
│  │ + set_weightage()│                   │ - analytics     │                               │
│  │ + get_weightage()│                   ├─────────────────┤                               │
│  └─────────────────┘                    │ + to_dict()     │                               │
│           │                             │ + calculate_score()│                             │
│           │                             │ + set_answers() │                               │
│           │                             │ + get_answers() │                               │
│           │                             └─────────────────┘                               │
│           │                                      │                                        │
│           └──────────────────────────────────────┘                                        │
│                                                                                             │
│  ┌─────────────────┐                                                                       │
│  │UGCNetPractice   │                                                                       │
│  │    Attempt      │                                                                       │
│  ├─────────────────┤                                                                       │
│  │ - id: int       │                                                                       │
│  │ - user_id: int  │                                                                       │
│  │ - subject_id    │                                                                       │
│  │ - title: str    │                                                                       │
│  │ - practice_type │                                                                       │
│  │ - selected_chapters│                                                                    │
│  │ - total_questions│                                                                      │
│  │ - status: str   │                                                                       │
│  │ - score: float  │                                                                       │
│  │ - questions_data│                                                                       │
│  │ - answers_data  │                                                                       │
│  ├─────────────────┤                                                                       │
│  │ + to_dict()     │                                                                       │
│  │ + calculate_practice_score()│                                                           │
│  │ + set_questions()│                                                                      │
│  │ + get_questions()│                                                                      │
│  └─────────────────┘                                                                       │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

### Service Layer Classes

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                SERVICE LAYER                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐                       │
│  │   AIService     │    │QuestionBankService│  │UGCNetMockService│                       │
│  ├─────────────────┤    ├─────────────────┤    ├─────────────────┤                       │
│  │ - model: Gemini │    │ - db: SQLAlchemy│    │ - generator     │                       │
│  │ - use_mock: bool│    ├─────────────────┤    ├─────────────────┤                       │
│  ├─────────────────┤    │ + create_question()│ │ + create_test() │                       │
│  │ + generate_questions()│ + update_question()│ │ + start_attempt()│                      │
│  │ + verify_question()│ │ + delete_question()│ │ + submit_attempt()│                      │
│  │ + _call_gemini()│    │ + search_questions()│ │ + get_results() │                       │
│  │ + _parse_response()│ │ + bulk_import()  │    │ + calculate_analytics()│                  │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘                       │
│                                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐                                               │
│  │UGCNetPaperGenerator│ │ NotificationService│                                            │
│  ├─────────────────┤    ├─────────────────┤                                               │
│  │ - weightage_system│  │ - mail: Flask-Mail│                                             │
│  ├─────────────────┤    ├─────────────────┤                                               │
│  │ + generate_paper()│  │ + send_notification()│                                          │
│  │ + apply_weightage()│ │ + send_daily_reminder()│                                        │
│  │ + select_questions()│ │ + send_report()  │                                             │
│  │ + balance_difficulty()│ + queue_notification()│                                        │
│  └─────────────────┘    └─────────────────┘                                               │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Activity Diagrams

### User Test Taking Activity

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                             USER TEST TAKING ACTIVITY                                      │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────┐                                                                           │
│  │    Start    │                                                                           │
│  └─────────────┘                                                                           │
│         │                                                                                  │
│         ▼                                                                                  │
│  ┌─────────────┐                                                                           │
│  │ User Login  │                                                                           │
│  │ Successful? │                                                                           │
│  └─────────────┘                                                                           │
│         │ Yes                                                                              │
│         ▼                                                                                  │
│  ┌─────────────┐                                                                           │
│  │  Navigate   │                                                                           │
│  │ to UGC NET  │                                                                           │
│  │ Dashboard   │                                                                           │
│  └─────────────┘                                                                           │
│         │                                                                                  │
│         ▼                                                                                  │
│  ┌─────────────┐    ┌─────────────┐                                                       │
│  │   Select    │    │   Select    │                                                       │
│  │  Practice   │    │  Mock Test  │                                                       │
│  │   Test      │    │             │                                                       │
│  └─────────────┘    └─────────────┘                                                       │
│         │                    │                                                            │
│         ▼                    ▼                                                            │
│  ┌─────────────┐    ┌─────────────┐                                                       │
│  │  Choose     │    │  Choose     │                                                       │
│  │  Chapters   │    │  Subject    │                                                       │
│  └─────────────┘    └─────────────┘                                                       │
│         │                    │                                                            │
│         ▼                    ▼                                                            │
│  ┌─────────────┐    ┌─────────────┐                                                       │
│  │ Configure   │    │ Configure   │                                                       │
│  │ Difficulty  │    │ Mock Test   │                                                       │
│  │ & Count     │    │ Settings    │                                                       │
│  └─────────────┘    └─────────────┘                                                       │
│         │                    │                                                            │
│         └────────────────────┴──────────────────┐                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ Generate    │                                        │
│                                    │ Questions   │                                        │
│                                    │ (AI Service)│                                        │
│                                    └─────────────┘                                        │
│                                                 │                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ Start Test  │                                        │
│                                    │ Timer       │                                        │
│                                    └─────────────┘                                        │
│                                                 │                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ Display     │                                        │
│                                    │ Question    │                                        │
│                                    └─────────────┘                                        │
│                                                 │                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ User Selects│                                        │
│                                    │ Answer      │                                        │
│                                    └─────────────┘                                        │
│                                                 │                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ Auto-save   │                                        │
│                                    │ Progress    │                                        │
│                                    └─────────────┘                                        │
│                                                 │                                         │
│                                                 ▼                                         │
│                                    ┌─────────────┐                                        │
│                                    │ More        │                                        │
│                                    │ Questions?  │                                        │
│                                    └─────────────┘                                        │
│                                         │ Yes │ No                                        │
│                              ┌──────────┘     └──────────┐                               │
│                              │                           ▼                               │
│                              │                ┌─────────────┐                            │
│                              │                │ Submit Test │                            │
│                              │                └─────────────┘                            │
│                              │                           │                               │
│                              │                           ▼                               │
│                              │                ┌─────────────┐                            │
│                              │                │ Calculate   │                            │
│                              │                │ Score &     │                            │
│                              │                │ Analytics   │                            │
│                              │                └─────────────┘                            │
│                              │                           │                               │
│                              │                           ▼                               │
│                              │                ┌─────────────┐                            │
│                              │                │ Display     │                            │
│                              │                │ Results &   │                            │
│                              │                │ Insights    │                            │
│                              │                └─────────────┘                            │
│                              │                           │                               │
│                              │                           ▼                               │
│                              │                ┌─────────────┐                            │
│                              │                │    End      │                            │
│                              │                └─────────────┘                            │
│                              │                                                           │
│                              └───────────────────────────────────────────────────────────┘
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

### Admin Question Management Activity

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                          ADMIN QUESTION MANAGEMENT ACTIVITY                                │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────┐                                                                           │
│  │    Start    │                                                                           │
│  └─────────────┘                                                                           │
│         │                                                                                  │
│         ▼                                                                                  │
│  ┌─────────────┐                                                                           │
│  │ Admin Login │                                                                           │
│  └─────────────┘                                                                           │
│         │                                                                                  │
│         ▼                                                                                  │
│  ┌─────────────┐                                                                           │
│  │ Navigate to │                                                                           │
│  │ Question    │                                                                           │
│  │ Management  │                                                                           │
│  └─────────────┘                                                                           │
│         │                                                                                  │
│         ▼                                                                                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│  │   Manual    │    │   AI        │    │   Bulk      │    │   Edit      │                │
│  │   Create    │    │ Generation  │    │   Import    │    │  Existing   │                │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘                │
│         │                    │                    │                    │                  │
│         ▼                    ▼                    ▼                    ▼                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│  │ Fill Form   │    │ Select      │    │ Upload      │    │ Modify      │                │
│  │ with        │    │ Topic &     │    │ CSV/Excel   │    │ Question    │                │
│  │ Question    │    │ Parameters  │    │ File        │    │ Details     │                │
│  │ Details     │    └─────────────┘    └─────────────┘    └─────────────┘                │
│  └─────────────┘             │                    │                    │                  │
│         │                    ▼                    ▼                    ▼                  │
│         │          ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│         │          │ Create      │    │ Validate    │    │ Update      │                │
│         │          │ Background  │    │ File        │    │ Database    │                │
│         │          │ Task        │    │ Format      │    │ Record      │                │
│         │          └─────────────┘    └─────────────┘    └─────────────┘                │
│         │                    │                    │                    │                  │
│         │                    ▼                    ▼                    ▼                  │
│         │          ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                │
│         │          │ Call        │    │ Process     │    │ Verify      │                │
│         │          │ Gemini AI   │    │ Each Row    │    │ Changes     │                │
│         │          │ API         │    │ in File     │    │             │                │
│         │          └─────────────┘    └─────────────┘    └─────────────┘                │
│         │                    │                    │                    │                  │
│         │                    ▼                    ▼                    │                  │
│         │          ┌─────────────┐    ┌─────────────┐    │                              │
│         │          │ Parse AI    │    │ Create      │    │                              │
│         │          │ Response    │    │ Questions   │    │                              │
│         │          │ to JSON     │    │ in Batch    │    │                              │
│         │          └─────────────┘    └─────────────┘    │                              │
│         │                    │                    │      │                              │
│         └────────────────────┼────────────────────┼──────┘                              │
│                              │                    │                                     │
│                              ▼                    ▼                                     │
│                    ┌─────────────┐    ┌─────────────┐                                  │
│                    │ Validate    │    │ Store in    │                                  │
│                    │ Question    │    │ Database    │                                  │
│                    │ Format      │    │ with        │                                  │
│                    └─────────────┘    │ Verification│                                  │
│                              │        │ Status      │                                  │
│                              │        └─────────────┘                                  │
│                              │                  │                                     │
│                              ▼                  ▼                                     │
│                    ┌─────────────┐    ┌─────────────┐                                  │
│                    │ Store       │    │ Notify      │                                  │
│                    │ Question    │    │ Admin of    │                                  │
│                    │ with        │    │ Completion  │                                  │
│                    │ Metadata    │    │ Status      │                                  │
│                    └─────────────┘    └─────────────┘                                  │
│                              │                  │                                     │
│                              ▼                  ▼                                     │
│                    ┌─────────────┐    ┌─────────────┐                                  │
│                    │ Review      │    │ Update      │                                  │
│                    │ Generated   │    │ Question    │                                  │
│                    │ Questions   │    │ Bank        │                                  │
│                    └─────────────┘    │ Statistics  │                                  │
│                              │        └─────────────┘                                  │
│                              ▼                  │                                     │
│                    ┌─────────────┐              │                                     │
│                    │ Approve/    │              │                                     │
│                    │ Reject      │              │                                     │
│                    │ Questions   │              │                                     │
│                    └─────────────┘              │                                     │
│                              │                  │                                     │
│                              ▼                  ▼                                     │
│                    ┌─────────────┐    ┌─────────────┐                                  │
│                    │ Activate    │    │    End      │                                  │
│                    │ Approved    │    │             │                                  │
│                    │ Questions   │    │             │                                  │
│                    └─────────────┘    └─────────────┘                                  │
│                              │                                                         │
│                              ▼                                                         │
│                    ┌─────────────┐                                                     │
│                    │    End      │                                                     │
│                    └─────────────┘                                                     │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Sequence Diagrams

### User Authentication Sequence

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                            USER AUTHENTICATION SEQUENCE                                    │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  Client        API Gateway       Auth Controller     Database        JWT Service           │
│     │               │                   │               │                │                 │
│     │ POST /login   │                   │               │                │                 │
│     │──────────────▶│                   │               │                │                 │
│     │               │ forward request   │               │                │                 │
│     │               │──────────────────▶│               │                │                 │
│     │               │                   │ validate_user │                │                 │
│     │               │                   │──────────────▶│                │                 │
│     │               │                   │               │ user_data      │                 │
│     │               │                   │◀──────────────│                │                 │
│     │               │                   │ check_password│                │                 │
│     │               │                   │──────────────▶│                │                 │
│     │               │                   │               │ password_valid │                 │
│     │               │                   │◀──────────────│                │                 │
│     │               │                   │               │                │create_token     │
│     │               │                   │ generate_jwt  │                │                 │
│     │               │                   │───────────────────────────────▶│                 │
│     │               │                   │               │                │ jwt_token       │
│     │               │                   │◀───────────────────────────────│                 │
│     │               │                   │ update_last_login             │                 │
│     │               │                   │──────────────▶│                │                 │
│     │               │                   │               │ success        │                 │
│     │               │                   │◀──────────────│                │                 │
│     │               │ auth_response     │               │                │                 │
│     │               │◀──────────────────│               │                │                 │
│     │ 200 OK        │                   │               │                │                 │
│     │ {token, user} │                   │               │                │                 │
│     │◀──────────────│                   │               │                │                 │
│     │               │                   │               │                │                 │
│     │ store token   │                   │               │                │                 │
│     │ in localStorage│                  │               │                │                 │
│     │               │                   │               │                │                 │
│     │ subsequent requests              │               │                │                 │
│     │ include Authorization header      │               │                │                 │
│     │──────────────▶│                   │               │                │                 │
│     │               │ verify_jwt        │               │                │                 │
│     │               │───────────────────────────────────────────────────▶│                 │
│     │               │                   │               │                │ token_valid     │
│     │               │◀───────────────────────────────────────────────────│                 │
│     │               │ process_request   │               │                │                 │
│     │               │──────────────────▶│               │                │                 │
│     │               │                   │               │                │                 │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

### AI Question Generation Sequence

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                          AI QUESTION GENERATION SEQUENCE                                   │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  Admin        API         AI Controller    Celery Queue    AI Service     Gemini API      │
│   │            │              │                │              │              │            │
│   │ Generate   │              │                │              │              │            │
│   │ Questions  │              │                │              │              │            │
│   │───────────▶│              │                │              │              │            │
│   │            │ POST /ai/    │                │              │              │            │
│   │            │ generate     │                │              │              │            │
│   │            │─────────────▶│                │              │              │            │
│   │            │              │ validate_params│              │              │            │
│   │            │              │                │              │              │            │
│   │            │              │ create_task    │              │              │            │
│   │            │              │───────────────▶│              │              │            │
│   │            │              │                │ task_id      │              │            │
│   │            │              │◀───────────────│              │              │            │
│   │            │ task_created │                │              │              │            │
│   │            │ {task_id}    │                │              │              │            │
│   │            │◀─────────────│                │              │              │            │
│   │ 202 Accepted│              │                │              │              │            │
│   │ {task_id}   │              │                │              │              │            │
│   │◀───────────│              │                │              │              │            │
│   │            │              │                │              │              │            │
│   │            │              │                │ execute_task │              │            │
│   │            │              │                │─────────────▶│              │            │
│   │            │              │                │              │ generate_prompt          │
│   │            │              │                │              │              │            │
│   │            │              │                │              │ call_gemini  │            │
│   │            │              │                │              │─────────────▶│            │
│   │            │              │                │              │              │ process    │
│   │            │              │                │              │              │ request    │
│   │            │              │                │              │              │            │
│   │            │              │                │              │              │ AI response│
│   │            │              │                │              │◀─────────────│            │
│   │            │              │                │              │ parse_response            │
│   │            │              │                │              │              │            │
│   │            │              │                │              │ validate_format          │
│   │            │              │                │              │              │            │
│   │            │              │                │              │ store_questions          │
│   │            │              │                │              │              │            │
│   │            │              │                │              │ verify_questions         │
│   │            │              │                │              │              │            │
│   │            │              │                │ task_complete│              │            │
│   │            │              │                │◀─────────────│              │            │
│   │            │              │                │              │              │            │
│   │ Check      │              │                │              │              │            │
│   │ Status     │              │                │              │              │            │
│   │───────────▶│              │                │              │              │            │
│   │            │ GET /ai/     │                │              │              │            │
│   │            │ status/{id}  │                │              │              │            │
│   │            │─────────────▶│                │              │              │            │
│   │            │              │ check_task_status            │              │            │
│   │            │              │───────────────▶│              │              │            │
│   │            │              │                │ task_result  │              │            │
│   │            │              │◀───────────────│              │              │            │
│   │            │ task_status  │                │              │              │            │
│   │            │ {completed}  │                │              │              │            │
│   │            │◀─────────────│                │              │              │            │
│   │ 200 OK     │              │                │              │              │            │
│   │ {status,   │              │                │              │              │            │
│   │  questions}│              │                │              │              │            │
│   │◀───────────│              │                │              │              │            │
│   │            │              │                │              │              │            │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Diagrams

### Production Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                            PRODUCTION DEPLOYMENT ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                                INTERNET                                                │  │
│  └─────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                        │                                                    │
│                                        │ HTTPS/HTTP                                         │
│                                        ▼                                                    │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                              LOAD BALANCER                                             │  │
│  │                                 (Nginx)                                                │  │
│  │                            - SSL Termination                                           │  │
│  │                            - Request Routing                                           │  │
│  │                            - Static File Serving                                       │  │
│  └─────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                        │                                                    │
│                      ┌─────────────────┼─────────────────┐                                  │
│                      │                 │                 │                                  │
│                      ▼                 ▼                 ▼                                  │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                              │
│  │   Frontend      │ │   Backend       │ │   Background    │                              │
│  │   Container     │ │   Container     │ │   Workers       │                              │
│  │                 │ │                 │ │                 │                              │
│  │  Vue.js App     │ │  Flask API      │ │  Celery         │                              │
│  │  Static Assets  │ │  Business Logic │ │  - AI Tasks     │                              │
│  │  Port 3000      │ │  Port 8000      │ │  - Notifications│                              │
│  └─────────────────┘ └─────────────────┘ │  - Analytics    │                              │
│                                          └─────────────────┘                              │
│                                                    │                                       │
│                                                    │                                       │
│                      ┌─────────────────────────────┼─────────────────────────────────────┐ │
│                      │                             │                                     │ │
│                      ▼                             ▼                                     │ │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐      │ │
│  │    Database     │ │   Message       │ │   File          │ │   External      │      │ │
│  │   Container     │ │   Queue         │ │   Storage       │ │   Services      │      │ │
│  │                 │ │                 │ │                 │ │                 │      │ │
│  │  PostgreSQL     │ │  Redis          │ │  Volume Mount   │ │  Google Gemini  │      │ │
│  │  Data Volume    │ │  Task Queue     │ │  /uploads       │ │  SMTP Server    │      │ │
│  │  Port 5432      │ │  Port 6379      │ │  /exports       │ │  CDN (Optional) │      │ │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘      │ │
│                                                                                         │ │
│                                                                                         │ │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                              MONITORING & LOGGING                                  │ │ │
│  │                                                                                     │ │ │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                     │ │ │
│  │  │   Application   │ │   System        │ │   Error         │                     │ │ │
│  │  │   Logs          │ │   Metrics       │ │   Tracking      │                     │ │ │
│  │  │   (ELK Stack)   │ │   (Prometheus)  │ │   (Sentry)      │                     │ │ │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘                     │ │ │
│  └─────────────────────────────────────────────────────────────────────────────────────┘ │ │
│                                                                                         │ │
│                                                                                         │ │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐ │ │
│  │                                BACKUP & RECOVERY                                   │ │ │
│  │                                                                                     │ │ │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                     │ │ │
│  │  │   Database      │ │   File          │ │   Configuration │                     │ │ │
│  │  │   Backups       │ │   Backups       │ │   Backups       │                     │ │ │
│  │  │   (Daily)       │ │   (Weekly)      │ │   (Git)         │                     │ │ │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘                     │ │ │
│  └─────────────────────────────────────────────────────────────────────────────────────┘ │ │
│                                                                                         │ │
│                                                                                         │ │
└─────────────────────────────────────────────────────────────────────────────────────────┘ │
                                                                                           │
                                                                                           │
                                                                                           │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### Container Orchestration (Docker Compose)

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                        DOCKER COMPOSE ORCHESTRATION                                        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                                DOCKER HOST                                             │  │
│  ├─────────────────────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                                         │  │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐     │  │
│  │  │   nginx         │ │   frontend      │ │   backend       │ │   celery        │     │  │
│  │  │   ─────────     │ │   ─────────     │ │   ─────────     │ │   ─────────     │     │  │
│  │  │   Image: nginx  │ │   Build: ./front│ │   Build: ./back │ │   Build: ./back │     │  │
│  │  │   Ports: 80,443 │ │   Ports: 3000   │ │   Ports: 8000   │ │   Command: celery│     │  │
│  │  │   Volumes:      │ │   Volumes:      │ │   Volumes:      │ │   Depends:       │     │  │
│  │  │   - ./nginx.conf│ │   - ./frontend  │ │   - ./backend   │ │   - redis        │     │  │
│  │  │   - ./ssl       │ │   Environment:  │ │   - backend_data│ │   - backend      │     │  │
│  │  │   Depends:      │ │   - NODE_ENV    │ │   Environment:  │ │   Environment:   │     │  │
│  │  │   - frontend    │ │   - VITE_API_URL│ │   - FLASK_ENV   │ │   - FLASK_ENV    │     │  │
│  │  │   - backend     │ │                 │ │   - DATABASE_URL│ │   - CELERY_BROKER│     │  │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘     │  │
│  │                                                                                         │  │
│  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                         │  │
│  │  │   redis         │ │   database      │ │   volumes       │                         │  │
│  │  │   ─────────     │ │   ─────────     │ │   ─────────     │                         │  │
│  │  │   Image: redis  │ │   Image: postgres│ │   backend_data  │                         │  │
│  │  │   Ports: 6379   │ │   Ports: 5432   │ │   redis_data    │                         │  │
│  │  │   Volumes:      │ │   Volumes:      │ │   postgres_data │                         │  │
│  │  │   - redis_data  │ │   - postgres_data│ │   uploads_data  │                         │  │
│  │  │   Command:      │ │   Environment:  │ │   ─────────     │                         │  │
│  │  │   - redis-server│ │   - POSTGRES_DB │ │   Type: named   │                         │  │
│  │  │   - --appendonly│ │   - POSTGRES_USER│ │   Driver: local │                         │  │
│  │  │   - yes         │ │   - POSTGRES_PASS│ │   Scope: local  │                         │  │
│  │  └─────────────────┘ └─────────────────┘ └─────────────────┘                         │  │
│  │                                                                                         │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────────────┐  │  │
│  │  │                               NETWORKS                                             │  │  │
│  │  ├─────────────────────────────────────────────────────────────────────────────────────┤  │  │
│  │  │                                                                                     │  │  │
│  │  │  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                     │  │  │
│  │  │  │   prepcheck     │ │   database      │ │   external      │                     │  │  │
│  │  │  │   ─────────     │ │   ─────────     │ │   ─────────     │                     │  │  │
│  │  │  │   Driver: bridge│ │   Driver: bridge│ │   Driver: bridge│                     │  │  │
│  │  │  │   Internal: no  │ │   Internal: yes │ │   Internal: no  │                     │  │  │
│  │  │  │   Scope: local  │ │   Scope: local  │ │   Scope: local  │                     │  │  │
│  │  │  │   Services:     │ │   Services:     │ │   Services:     │                     │  │  │
│  │  │  │   - nginx       │ │   - database    │ │   - nginx       │                     │  │  │
│  │  │  │   - frontend    │ │   - backend     │ │   - backend     │                     │  │  │
│  │  │  │   - backend     │ │   - redis       │ │   - celery      │                     │  │  │
│  │  │  │   - celery      │ │   - celery      │ │   (Internet)    │                     │  │  │
│  │  │  │   - redis       │ │                 │ │                 │                     │  │  │
│  │  │  └─────────────────┘ └─────────────────┘ └─────────────────┘                     │  │  │
│  │  │                                                                                     │  │  │
│  │  └─────────────────────────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                                         │  │
│  └─────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

*These diagrams provide visual representation of the PrepCheck system architecture, data flow, and deployment structure. They complement the main system architecture report and should be referenced together for a complete understanding of the system design.*
